<html>
<head>
<title>Morse Code</title>
<script>

function encdec(){
	let str_input = document.getElementById("input").value;
	let operation = document.getElementById("operation").value;
	
	const mcode = {
      'A': '.-', 'B': '-...', 'C': '-.-.', 'D': '-..', 'E': '.', 'F': '..-.',
      'G': '--.', 'H': '....', 'I': '..', 'J': '.---', 'K': '-.-', 'L': '.-..',
      'M': '--', 'N': '-.', 'O': '---', 'P': '.--.', 'Q': '--.-', 'R': '.-.',
      'S': '...', 'T': '-', 'U': '..-', 'V': '...-', 'W': '.--', 'X': '-..-',
      'Y': '-.--', 'Z': '--..', ' ': ' ', '0': '-----',
      '1': '.----', '2': '..---', '3': '...--', '4': '....-', '5': '.....',
      '6': '-....', '7': '--...', '8': '---..', '9': '----.',
      '&': '.-...', "'": '.----.', '@': '.--.-.', ')': '-.--.-', '(': '-.--.',
      ':': '---...', ',': '--..--', '=': '-...-', '!': '-.-.--', '.': '.-.-.-',
      '-': '-....-', '+': '.-.-.', '"': '.-..-.', '?': '..--..', '/': '-..-.'
    }
    const mdecode = {
      '.-':'A' ,'-...' :'B' ,'-.-.' :'C' ,'-..' :'D' ,'.' :'E' , '..-.':'F' ,
      '--.': 'G','....' :'H' ,'..' :'I' ,'.---' :'J' ,'-.-' :'K' ,'.-..' :'L' ,
      '--': 'M','-.' :'N' ,'---' :'O' ,'.--.' :'P' , '--.-':'Q' , '.-.':'R' ,
      '...': 'S','-' :'T' ,'..-' :'U' ,'...-' :'V' , '.--':'W' ,'-..-' :'X' ,
     '-.--' :'Y' ,'--..' :'Z' , ' ': ' ','-----' :'0' ,
     '.----' :'1' ,'..---' :'2' ,'...--' : '3','....-' :'4' , '.....':'5' ,
      '-....':'6' ,'--...' :'7' ,'---..' :'8' ,'----.' :'9' ,
      '.-...' :'&','.----.' :"'" ,'.--.-.' :'@' , '-.--.-' :')','-.--.' :'(' ,
     '---...' :':' ,'--..--' :',' ,'-...-' :'=' ,'-.-.--' :'!' ,'.-.-.-' :'.' ,
     '-....-' :'-' ,'.-.-.' :'+' ,'.-..-.' :'"' ,'..--..' :'?' , '-..-.' :'/' 
    }
    
  var answer = "";
  var error_message = "";

  if (operation == "enc"){
    for (let index = 0; index < str_input.length; index++) {
    var element = str_input[index].toUpperCase();
    if (mcode[element] == undefined){
        console.log("Unkown element?");
        error_message="Alert \"Invalid input\"";
        break;
        }
    if (element != " "){
      answer+=mcode[element];
    }
    answer+=" ";
  }
  }else if(operation == "dec"){
    var element = "";
    var error_message = "";
    str_input+=" ";
    for (let index = 0; index < str_input.length; index++) {
      if(str_input[index]!=" "){
        element+=str_input[index];
      }else if(element != ""){
        if (mdecode[element] == undefined){
        console.log("Unkown element?");
        error_message="Alert \"Invalid input\"";
        break;
        }else{
        console.log(mdecode[element]);
        answer+=mdecode[element];
        console.log(answer);
        }
      
      element="";
    }else{
        answer+=" "
      }
    }
  }
  if(error_message == ""){
	document.getElementById("output").innerHTML = answer;
  }else{
    document.getElementById("output").innerHTML = error_message;
  }
}

</script>
</head>
<body>
<H1>Morse code encoder/decoder</H1>
<h3>@author: Edward Falkner-Carter</h3>
<div>
<form>
<p> Enter a string</p>
<p> <textarea id="input" rows='5' cols='50'></textarea> </p>
<p>
<div id="optionloc" style="position:absolute; top:190px; left:240px;">
<select id="operation">
<option value="enc">Encode</option>
<option value="dec">Decode</option>
</select>
</div>
<div id="buttonloc" style="position:absolute; top:190px; left:320px;">
<button type="button" id="submit" onclick=encdec()>Submit</button>
</div>
</p>

<div>
<p>Encoded/decoded Morse code: </p>
<textarea id="output" rows='5' cols='50' readonly></textarea>
</div>
</form>
</div>
</body>
</html>